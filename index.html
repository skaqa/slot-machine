<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Magic Slot Adventure</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
	<style>
	:root {
		--primary: #8a2be2;
		--primary-dark: #5a189a;
		--secondary: #ffd700;
		--secondary-dark: #ffaa00;
		--accent: #00d4ff;
		--dark-bg: #0a0a1a;
		--darker-bg: #050510;
		--panel-bg: rgba(20, 20, 40, 0.8);
		--success: #4ecca3;
		--danger: #e94560;
		--text-light: #f8f9fa;
		--text-muted: #b0b0d0;
		--shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
		--glow: 0 0 20px rgba(138, 43, 226, 0.5);
		--border-radius: 16px;
		--transition: all 0.3s ease;
	}
	
	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}
	
	body {
		font-family: 'Poppins', sans-serif;
		background: linear-gradient(135deg, var(--darker-bg) 0%, var(--dark-bg) 50%, #1a1a2e 100%);
		color: var(--text-light);
		min-height: 100vh;
		overflow-x: hidden;
		position: relative;
	}
	
	body::before {
		content: '';
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: radial-gradient(circle at 20% 30%, rgba(138, 43, 226, 0.15) 0%, transparent 50%), radial-gradient(circle at 80% 70%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%);
		z-index: -1;
	}
	
	.stars {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		pointer-events: none;
		z-index: -1;
	}
	
	.star {
		position: absolute;
		background-color: white;
		border-radius: 50%;
		animation: twinkle 3s infinite;
	}
	
	@keyframes twinkle {
		0%,
		100% {
			opacity: 0.3;
		}
		50% {
			opacity: 1;
		}
	}
	
	.container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 20px;
	}
	/* Header Styles */
	
	header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 20px 0;
		margin-bottom: 30px;
	}
	
	.logo {
		display: flex;
		align-items: center;
		gap: 15px;
	}
	
	.logo-icon {
		font-size: 2.5rem;
		color: var(--secondary);
		filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));
	}
	
	.logo-text {
		font-family: 'Orbitron', sans-serif;
		font-size: 2.2rem;
		font-weight: 900;
		background: linear-gradient(to right, var(--secondary), var(--accent));
		-webkit-background-clip: text;
		background-clip: text;
		color: transparent;
		text-shadow: 0 0 15px rgba(138, 43, 226, 0.3);
	}
	/* Stats Panel */
	
	.stats-panel {
		display: flex;
		justify-content: center;
		gap: 40px;
		margin-bottom: 30px;
		background: none; /* Removed the shared background for a cleaner look */
		border: none;
		box-shadow: none;
	}
	
	.stat {
		padding: 15px 40px;
		border-radius: 20px;
		min-width: 220px;
		transition: var(--transition);
	}
	
	.stat:not(:last-child)::after {
		content: '';
		position: absolute;
		right: 0;
		top: 50%;
		transform: translateY(-50%);
		height: 60%;
		width: 1px;
		background: rgba(255, 255, 255, 0.1);
	}
	
	.stat-label {
		display: block;
		font-size: 0.9rem;
		color: var(--text-muted);
		margin-bottom: 5px;
		text-transform: uppercase;
		letter-spacing: 1px;
	}
	
	.stat-value {
		display: block;
		font-size: 2.2rem;
		font-weight: 700;
		font-family: 'Orbitron', sans-serif;
		color: var(--secondary);
		text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
	}
	
	/* üí∞ SCORE BOX STYLE */
	.score-box {
		background: linear-gradient(145deg, rgba(255, 215, 0, 0.1), rgba(20, 20, 40, 0.9));
		border: 2px solid var(--secondary);
		box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
	}
	.score-box .stat-value {
		color: var(--secondary);
		font-size: 2.8rem;
		text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
	}

	/* üîµ ROUND BOX STYLE */
	.round-box {
		background: linear-gradient(145deg, rgba(0, 212, 255, 0.1), rgba(20, 20, 40, 0.9));
		border: 2px solid var(--accent);
		box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
		display: flex;
		flex-direction: column;
		align-items: center;
	}
	.round-box .stat-label { color: var(--accent); }
	.round-display { display: flex; align-items: baseline; gap: 8px; }
	.round-prefix { font-family: 'Orbitron'; color: var(--accent); font-weight: 900; opacity: 0.7; }
	.round-box .stat-value {
		color: var(--accent);
		font-size: 2.8rem;
	}

	
	/* Game Area */
	
	.game-area {
		display: flex;
		flex-direction: column;
		align-items: center;
		margin-bottom: 40px;
	}
	/* Slot Machine */
	
	.slot-machine {
		margin-bottom: 0 !important;
		height: 100%;
		margin: 0
		display: flex;
		flex-direction: column;
		justify-content: center;
		position: relative;
		background: linear-gradient(145deg, rgba(30, 30, 60, 0.9), rgba(10, 10, 30, 0.9));
		border-radius: var(--border-radius);
		padding: 30px;
		border: 1px solid rgba(138, 43, 226, 0.3);
		box-shadow: 0 0 30px rgba(138, 43, 226, 0.3), inset 0 0 30px rgba(0, 0, 0, 0.5);
		margin-bottom: 30px;
		width: 100%;
		max-width: 800px;
		position: relative;
		overflow: hidden;
	}
	
	.slot-machine::before {
		content: '';
		position: absolute;
		top: -2px;
		left: -2px;
		right: -2px;
		bottom: -2px;
		background: linear-gradient(45deg, var(--primary), var(--accent), var(--secondary), var(--primary));
		border-radius: calc(var(--border-radius) + 4px);
		z-index: -1;
		animation: borderGlow 3s linear infinite;
	}
	
	@keyframes borderGlow {
		0% {
			filter: hue-rotate(0deg);
		}
		100% {
			filter: hue-rotate(360deg);
		}
	}
	
	.reels-container {
		display: flex;
		justify-content: center;
		gap: 20px;
		margin: 20px 0 40px;
		perspective: 1000px;
	}
	
	.reel {
		width: 120px;
		height: 120px;
		background: rgba(0, 0, 0, 0.7);
		border-radius: 12px;
		overflow: hidden;
		position: relative;
		border: 2px solid rgba(138, 43, 226, 0.5);
		box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7), inset 0 0 15px rgba(138, 43, 226, 0.2);
		transform-style: preserve-3d;
	}
	
	.reel::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: linear-gradient(to bottom, rgba(138, 43, 226, 0.1) 0%, transparent 30%, transparent 70%, rgba(138, 43, 226, 0.1) 100%);
		z-index: 2;
	}
	
	.strip {
		position: absolute;
		width: 100%;
		display: flex;
		flex-direction: column;
		align-items: center;
		top: 0;
		left: 0;
		transition: transform 0.1s linear;
	}
	
	.symbol {
		height: 120px;
		width: 120px;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 3.5rem;
		text-shadow: 0 0 10px currentColor;
		color: white;
		filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.5));
	}
	/* Controls */
	
	.controls {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 20px;
		margin-top: 20px;
	}
	
	.spin-btn {
		padding: 18px 80px;
		font-size: 1.5rem;
		font-weight: 700;
		font-family: 'Orbitron', sans-serif;
		background: linear-gradient(135deg, var(--primary), var(--primary-dark));
		color: white;
		border: none;
		border-radius: 50px;
		cursor: pointer;
		box-shadow: 0 8px 20px rgba(138, 43, 226, 0.4), inset 0 2px 5px rgba(255, 255, 255, 0.2);
		transition: var(--transition);
		position: relative;
		overflow: hidden;
		letter-spacing: 2px;
	}
	
	.spin-btn:hover {
		transform: translateY(-3px);
		box-shadow: 0 12px 25px rgba(138, 43, 226, 0.6), inset 0 2px 5px rgba(255, 255, 255, 0.2);
	}
	
	.spin-btn:active {
		transform: translateY(1px);
		box-shadow: 0 4px 10px rgba(138, 43, 226, 0.4), inset 0 2px 5px rgba(255, 255, 255, 0.2);
	}
	
	.spin-btn:disabled {
		background: linear-gradient(135deg, #444, #333);
		color: #777;
		cursor: not-allowed;
		transform: none;
		box-shadow: none;
	}
	
	.spin-btn::after {
		content: '';
		position: absolute;
		top: -50%;
		left: -50%;
		width: 200%;
		height: 200%;
		background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);
		transform: rotate(30deg);
		transition: var(--transition);
	}
	
	.spin-btn:hover::after {
		left: 100%;
	}
	/* Buffs Display */
	
	.buffs-container {
		display: flex;
		gap: 15px;
		margin-top: 20px;
		flex-wrap: wrap;
		justify-content: center;
	}
	
	.buff {
		display: flex;
		align-items: center;
		gap: 10px;
		background: rgba(78, 204, 163, 0.15);
		border: 1px solid rgba(78, 204, 163, 0.3);
		border-radius: 50px;
		padding: 10px 20px;
		font-weight: 600;
		color: var(--success);
		box-shadow: 0 0 15px rgba(78, 204, 163, 0.2);
	}
	
	.buff i {
		font-size: 1.2rem;
	}
	/* Odds Display */
	
	.main-game-layout {
		display: flex;
		flex-direction: row; /* Side by side */
		align-items: stretch;
		justify-content: center;
		gap: 30px;
		width: 100%;
		max-width: 1100px;
		margin-top: 20px auto;
	}
	
	.odds-display {
		background: var(--panel-bg);
		backdrop-filter: blur(10px);
		border-radius: var(--border-radius);
		padding: 25px;
		width: 260px
		border: 1px solid rgba(255, 255, 255, 0.1);
		min-width: 220px; /* Fixed width for the sidebar */
		box-shadow: var(--shadow);
		display: flex;
		flex-direction: column;
	}
	
	.odds-display h3 {
		color: var(--accent);
		margin-bottom: 20px;
		font-size: 1rem;
		font-family: 'Orbitron';
		text-align: center;
		border-bottom: 1px solid rgba(0, 212, 255, 0.2);
		padding-bottom: 10px;
	}
	
	.odds-grid {
		display: flex;
		flex-direction: column;
		gap: 12px;
		flex-grow: 1; 
		justify-content: space-between;
	}
	
	.odds-item {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 12px 15px;
		background: rgba(0, 0, 0, 0.4);
		border-radius: 10px;
		border-left: 4px solid;
		transition: var(--transition);
	}
	
	.slot-machine-wrapper {
		flex-grow: 1;
		display: flex;
		justify-content: column;
	}
	
	@media (max-width: 900px) {
		.main-game-layout {
			flex-direction: column;
			align-items: center;
		}
		.odds-display {
			width: 100%;
			max-width: 800px;
		}
		.odds-grid {
			flex-direction: row;
			flex-wrap: wrap;
		}
	}
	
	.odds-symbol {
		font-size: 1.8rem;
	}
	
	.odds-percentage {
		font-weight: 700;
		font-family: 'Orbitron', sans-serif;
		font-size: 1.2rem;
	}
	/* Shop Overlay */
	
	.shop-overlay {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(5, 5, 16, 0.95);
		backdrop-filter: blur(10px);
		z-index: 1000;
		align-items: center;
		justify-content: center;
		animation: fadeIn 0.3s ease;
	}
	
	@keyframes fadeIn {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}
	
	.shop-container {
		background: linear-gradient(145deg, rgba(30, 30, 60, 0.95), rgba(10, 10, 30, 0.95));
		border-radius: var(--border-radius);
		padding: 40px;
		max-width: 900px;
		width: 90%;
		border: 1px solid rgba(138, 43, 226, 0.3);
		box-shadow: 0 0 40px rgba(138, 43, 226, 0.4), inset 0 0 30px rgba(0, 0, 0, 0.5);
		position: relative;
		overflow: hidden;
	}
	
	.shop-header {
		text-align: center;
		margin-bottom: 30px;
	}
	
	.shop-header h1 {
		font-family: 'Orbitron', sans-serif;
		font-size: 2.5rem;
		background: linear-gradient(to right, var(--secondary), var(--accent));
		-webkit-background-clip: text;
		background-clip: text;
		color: transparent;
		margin-bottom: 10px;
	}
	
	.shop-score {
		font-size: 1.8rem;
		font-weight: 700;
		color: var(--secondary);
		font-family: 'Orbitron', sans-serif;
		display: inline-block;
		padding: 10px 30px;
		background: rgba(0, 0, 0, 0.5);
		border-radius: 50px;
		border: 2px solid var(--secondary);
	}
	
	.shop-items {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
		gap: 25px;
		margin: 40px 0;
	}
	
	.item-card {
		background: rgba(20, 20, 40, 0.8);
		border-radius: var(--border-radius);
		padding: 25px;
		text-align: center;
		border: 1px solid rgba(138, 43, 226, 0.3);
		transition: var(--transition);
		position: relative;
		overflow: hidden;
	}
	
	.item-card:hover {
		transform: translateY(-5px);
		border-color: var(--accent);
		box-shadow: 0 10px 25px rgba(0, 212, 255, 0.2);
	}
	
	.item-card.owned {
		border-color: var(--success);
		background: rgba(78, 204, 163, 0.1);
	}
	
	.item-icon {
		font-size: 3rem;
		margin-bottom: 15px;
		display: block;
	}
	
	.item-name {
		font-size: 1.5rem;
		font-weight: 700;
		margin-bottom: 10px;
		color: var(--text-light);
	}
	
	.item-desc {
		color: var(--text-muted);
		margin-bottom: 20px;
		font-size: 0.95rem;
		line-height: 1.5;
	}
	
	.item-price {
		font-size: 1.8rem;
		font-weight: 700;
		color: var(--secondary);
		margin-bottom: 20px;
		font-family: 'Orbitron', sans-serif;
	}
	
	.buy-btn {
		width: 100%;
		padding: 15px;
		background: linear-gradient(135deg, var(--primary), var(--primary-dark));
		color: white;
		border: none;
		border-radius: 10px;
		font-weight: 700;
		cursor: pointer;
		transition: var(--transition);
		font-family: 'Orbitron', sans-serif;
		letter-spacing: 1px;
	}
	
	.buy-btn:hover {
		background: linear-gradient(135deg, var(--primary-dark), var(--primary));
		transform: translateY(-2px);
		box-shadow: 0 5px 15px rgba(138, 43, 226, 0.4);
	}
	
	.buy-btn:disabled,
	.buy-btn.owned {
		background: linear-gradient(135deg, #333, #222);
		color: #777;
		cursor: not-allowed;
		transform: none;
		box-shadow: none;
	}
	
	.buy-btn.owned {
		background: linear-gradient(135deg, var(--success), #3daa87);
		color: white;
	}
	
	.next-round-btn {
		display: block;
		margin: 30px auto 0;
		padding: 18px 50px;
		background: linear-gradient(135deg, var(--danger), #c2185b);
		color: white;
		border: none;
		border-radius: 50px;
		font-weight: 700;
		font-size: 1.2rem;
		cursor: pointer;
		transition: var(--transition);
		font-family: 'Orbitron', sans-serif;
		letter-spacing: 1px;
	}
	
	.next-round-btn:hover {
		transform: translateY(-3px);
		box-shadow: 0 10px 20px rgba(233, 69, 96, 0.4);
	}
	/* Win Animation */
	
	.win-flash {
		animation: winFlash 0.5s ease 3;
	}
	
	@keyframes winFlash {
		0%,
		100% {
			box-shadow: 0 0 30px rgba(138, 43, 226, 0.3);
		}
		50% {
			box-shadow: 0 0 50px rgba(255, 215, 0, 0.7);
		}
	}
	/* Responsive Design */
	
	@media (max-width: 768px) {
		.stats-panel {
			flex-direction: column;
			gap: 20px;
		}
		.stat:not(:last-child)::after {
			display: none;
		}
		.reels-container {
			gap: 10px;
		}
		.reel {
			width: 90px;
			height: 90px;
		}
		.symbol {
			height: 90px;
			width: 90px;
			font-size: 2.5rem;
		}
		.spin-btn {
			padding: 15px 50px;
			font-size: 1.2rem;
		}
		.shop-items {
			grid-template-columns: 1fr;
		}
		.logo-text {
			font-size: 1.8rem;
		}
	}
	/* Footer */
	
	footer {
		text-align: center;
		padding: 20px;
		color: var(--text-muted);
		font-size: 0.9rem;
		border-top: 1px solid rgba(255, 255, 255, 0.05);
		margin-top: 30px;
	}
	
	.cheat-hint {
		position: fixed;
		bottom: 20px;
		right: 20px;
		background: rgba(0, 0, 0, 0.5);
		padding: 10px 15px;
		border-radius: 10px;
		font-size: 0.8rem;
		color: var(--text-muted);
		border: 1px solid rgba(138, 43, 226, 0.3);
	}
	
	.notification {
		position: fixed;
		border-radius: 12px;
		color: white;
		font-weight: 700;
		z-index: 10000;
		display: flex;
		align-items: center;
		gap: 12px;
		box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
		transition: all 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28);
		opacity: 0;
		font-family: 'Poppins', sans-serif;
		/* Cleaner font for small text */
		pointer-events: none;
	}
	
	.notification.show {
		transform: translateX(0);
	}
	/* üèÜ WIN Style */
	
	.notif-win {
		top: 20px;
		left: 50%;
		transform: translate(-50%, -150%);
		background: linear-gradient(135deg, #ffd700, #ffaa00);
		color: #000;
		min-width: 400px;
		padding: 18px;
		border: 2px solid #fff;
		/* Font Improvements */
		font-family: 'Orbitron', sans-serif;
		text-transform: uppercase;
		letter-spacing: 2px;
		font-size: 1rem;
		box-shadow: 0 0 30px rgba(255, 215, 0, 0.4), 0 10px 20px rgba(0, 0, 0, 0.5);
	}
	
	.notif-win.show {
		opacity: 1;
		transform: translate(-50%, 0);
	}
	/* üåü WIN NUMBER HIGHLIGHT: Extra "Pop" */
	
	.notif-highlight {
		font-weight: 900;
		color: #000;
		/* Black text on white background looks sharp */
		background: rgba(255, 255, 255, 0.9);
		padding: 2px 10px;
		border-radius: 4px;
		margin: 0 5px;
		box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
		display: inline-block;
	}
	
	.notification i {
		flex-shrink: 0;
		/* Prevents icon from squishing on small screens */
	}
	/* üåÄ ROUND START: Thin sleek bar at top */
	
	.notif-round {
		top: 0;
		left: 0;
		width: 100%;
		border-radius: 0;
		background: rgba(138, 43, 226, 0.9);
		border: none;
		justify-content: center;
		min-width: 100%;
		height: 40px;
	}
	
	.notif-round.show {
		opacity: 1;
		transform: translateY(0);
	}
	/* üõí PURCHASE: Small slide from left */
	
	.notif-buy {
		top: 20px;
		left: 20px;
		padding: 10px 20px;
		font-size: 0.85rem;
		background: #4ecca3;
		transform: translateX(-150%);
	}
	
	.notif-buy.show {
		opacity: 1;
		transform: translateX(0);
	}
	/* ‚ùå NO WIN: Tiny toast, bottom center */
	
	.notif-loss {
		bottom: 10px;
		left: 50%;
		padding: 8px 16px;
		font-size: 0.8rem;
		transform: translate(-50%, -150%);
		background: rgba(30, 30, 50, 0.95);
		border: 1px solid #444;
		color: #999;
	}
	
	.notif-loss.show {
		opacity: 1;
		transform: translate(-50%, 0);
	}
	/* ‚ÑπÔ∏è INFO: Top Left (for "Not enough points" etc.) */
	
	.notif-info {
		top: 20px;
		right: 20px;
		/* Moved to top right */
		padding: 10px 20px;
		font-size: 0.85rem;
		background: linear-gradient(135deg, #00d4ff, #0056ff);
		transform: translateX(150%);
		/* Slides from right */
		border: 1px solid rgba(255, 255, 255, 0.2);
	}
	
	.notif-info.show {
		opacity: 1;
		transform: translateX(0);
	}
	/* üí£ BANKRUPT Style */
	
	.notif-bomb {
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%) scale(0);
		background: linear-gradient(135deg, #ff4b2b, #ff0000);
		box-shadow: 0 0 40px rgba(255, 75, 43, 0.6);
		font-size: 1.5rem;
		text-align: center;
	}
	
	.notif-bomb.show {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1.1);
	}
	/* --- Spin Button Luck Effects --- */
	
	@keyframes luckGlow {
		0% {
			box-shadow: 0 8px 20px rgba(138, 43, 226, 0.4);
		}
		50% {
			box-shadow: 0 0 30px #4ecca3, inset 0 0 15px #4ecca3;
			transform: scale(1.05);
		}
		100% {
			box-shadow: 0 8px 20px rgba(138, 43, 226, 0.4);
		}
	}
	
	.luck-pulse {
		animation: luckGlow 1.2s ease-in-out 2;
		background: linear-gradient(135deg, #4ecca3, #1a1a2e) !important;
	}
	/* Floating +1 Effect */
	
	.plus-one {
		position: absolute;
		color: #4ecca3;
		font-weight: bold;
		font-family: 'Orbitron';
		font-size: 2rem;
		pointer-events: none;
		animation: floatUp 2.5s ease-out forwards;
		z-index: 100;
	}
	
	@keyframes floatUp {
		0% {
			opacity: 1;
			transform: translateY(0);
		}
		100% {
			opacity: 0;
			transform: translateY(-100px);
		}
	}
	/* Screen Shake Animation for Bomb */
	
	@keyframes shake {
		0% {
			transform: translate(1px, 1px) rotate(0deg);
		}
		10% {
			transform: translate(-1px, -2px) rotate(-1deg);
		}
		30% {
			transform: translate(3px, 2px) rotate(0deg);
		}
		50% {
			transform: translate(-1px, 2px) rotate(-1deg);
		}
		70% {
			transform: translate(3px, 1px) rotate(-1deg);
		}
		100% {
			transform: translate(1px, -2px) rotate(-1deg);
		}
	}
	
	.shake-it {
		animation: shake 0.5s;
		animation-iteration-count: 2;
	}
	</style>
</head>

<body>
	<!-- Background stars -->
	<div class="stars" id="stars"></div>
	<div class="container">
		<header>
			<div class="logo">
				<div class="logo-icon">üé∞</div>
				<h1 class="logo-text">MAGIC SLOT ADVENTURE</h1> </div>
		</header>
		<main>
			<!-- Stats Panel -->
			<div class="stats-panel">
				    <div class="stat score-box">
						<span class="stat-label"><i class="fas fa-coins"></i> Total Score</span>
						<span class="stat-value" id="score">100</span>
					</div>
				<div class="stat round-box">
						<span class="stat-label"><i class="fas fa-layer-group"></i> Progress</span>
						<div class="round-display">
							<span class="stat-value" id="round">1</span>
						</div>
					</div>
				</div>
			</div>
			<!-- Game Area -->
			<div class="game-area">
				<div class="main-game-layout">	
				<!-- Odds Display -->
				<div class="odds-display">
					<h3><i class="fas fa-chart-pie"></i> WIN CHANCES</h3>
					<div class="odds-grid" id="odds-display">
						<!-- Odds will be populated by JavaScript -->
					</div>
				</div>
				<!-- Slot Machine -->
				<div class="slot-machine" id="machine-box">
					<div class="reels-container">
						<div class="reel">
							<div class="strip" id="r1"></div>
						</div>
						<div class="reel">
							<div class="strip" id="r2"></div>
						</div>
						<div class="reel">
							<div class="strip" id="r3"></div>
						</div>
					</div>
					<div class="controls">
						<button id="spin-btn" class="spin-btn"> <i class="fas fa-play"></i> SPIN </button>
						<!-- Buffs Display -->
						<div class="buffs-container" id="buffs">
							<!-- Buffs will be populated by JavaScript -->
						</div>
					</div>
				</div>
			</div>
		</main>
		<footer>
			<p>Magic Slot Adventure &copy; 2077 | Use your points wisely in the Magic Shop!</p>
		</footer>
	</div>
	<!-- Magic Shop Overlay -->
	<div class="shop-overlay" id="shop">
		<div class="shop-container">
			<div class="shop-header">
				<h1><i class="fas fa-hat-wizard"></i> MAGIC SHOP</h1>
				<div class="shop-score">Your Points: <span id="shop-score-val">0</span></div>
			</div>
			<div class="shop-items">
				<div class="item-card" id="item-luck">
					<div class="item-icon">üçÄ</div>
					<h3 class="item-name">Luck Boost</h3>
					<p class="item-desc">20% chance to get spin back every time you play!</p>
					<div class="item-price">50 PTS</div>
					<button id="btn-luck" class="buy-btn" onclick="buyItem('luck', 50)"> PURCHASE </button>
				</div>
				<div class="item-card" id="item-double">
					<div class="item-icon">‚ö°</div>
					<h3 class="item-name">Double Score</h3>
					<p class="item-desc">All wins are doubled for the next round.</p>
					<div class="item-price">100 PTS</div>
					<button id="btn-double" class="buy-btn" onclick="buyItem('double', 100)"> PURCHASE </button>
				</div>
				<div class="item-card" id="item-magnet">
					<div class="item-icon">üíé</div>
					<h3 class="item-name">Rare Magnet</h3>
					<p class="item-desc">5x chance for rare symbols (7 and Star).</p>
					<div class="item-price">150 PTS</div>
					<button id="btn-magnet" class="buy-btn" onclick="buyItem('magnet', 150)"> PURCHASE </button>
				</div>
			</div>
			<button class="next-round-btn" onclick="nextRound()"> START NEXT ROUND <i class="fas fa-arrow-right"></i> </button>
		</div>
	</div>
	<script>
	// Game variables
	const symbols = ["üçí", "üçã", "üîî", "7Ô∏è‚É£", "‚≠ê", "üí£"];
	const symbolColors = {
		"üçí": "#e94560",
		"üçã": "#ffd700",
		"üîî": "#4ecca3",
		"7Ô∏è‚É£": "#8a2be2",
		"‚≠ê": "#00d4ff",
		"üí£": "#ff4b2b"
	};
	let score = 100;
	let round = 1;
	let spinsLeft = 10;
	let activeItems = {
		luck: false,
		double: false,
		magnet: false
	};
	let isLuckAnimating = false;
	let isCheatActive = false;
	const baseTable = [{
		id: 'üçí',
		val: 10,
		prob: 40,
		color: "#e94560"
	}, {
		id: 'üçã',
		val: 20,
		prob: 10,
		color: "#ffd700"
	}, {
		id: 'üîî',
		val: 50,
		prob: 5,
		color: "#4ecca3"
	}, {
		id: '7Ô∏è‚É£',
		val: 100,
		prob: 2,
		color: "#8a2be2"
	}, {
		id: '‚≠ê',
		val: 500,
		prob: 1,
		color: "#00d4ff"
	}, {
		id: 'üí£',
		val: 0,
		prob: 3
	}, {
		id: null,
		val: 0,
		prob: 39,
		color: "#666"
	}];
	// Create stars for background
	function createStars() {
		const starsContainer = document.getElementById('stars');
		for(let i = 0; i < 150; i++) {
			const star = document.createElement('div');
			star.className = 'star';
			star.style.width = Math.random() * 3 + 'px';
			star.style.height = star.style.width;
			star.style.left = Math.random() * 100 + '%';
			star.style.top = Math.random() * 100 + '%';
			star.style.animationDelay = Math.random() * 5 + 's';
			star.style.animationDuration = Math.random() * 3 + 2 + 's';
			starsContainer.appendChild(star);
		}
	}
	// Initialize the slot reels
	function initReels() {
		document.querySelectorAll(".strip").forEach(strip => {
			strip.innerHTML = '';
			// Add random symbols for scrolling effect
			for(let i = 0; i < 20; i++) {
				const div = document.createElement('div');
				div.className = 'symbol';
				const symbol = symbols[Math.floor(Math.random() * symbols.length)];
				div.innerText = symbol;
				div.style.color = symbolColors[symbol] || "#ffffff";
				strip.appendChild(div);
			}
		});
	}
	// Update UI elements
	function updateUI() {
		// 1. Update basic stats
		document.getElementById('score').innerText = score;
		document.getElementById('round').innerText = round;		
		// 2. Prepare the probability table
		let currentTable = JSON.parse(JSON.stringify(baseTable));
		let totalIncrease = 0;
		let bombItem = currentTable.find(i => i.id === 'üí£');
		let bombInc = (round - 1) * 2;
		bombItem.prob += bombInc;
		totalIncrease += bombInc;
		if(activeItems.magnet) {
			let seven = currentTable.find(i => i.id === '7Ô∏è‚É£');
			let star = currentTable.find(i => i.id === '‚≠ê');
			// Calculate the 4x increase (since they are already 1x in baseTable)
			let sevenInc = seven.prob * 4;
			let starInc = star.prob * 4;
			seven.prob += sevenInc;
			star.prob += starInc;
			totalIncrease += (sevenInc + starInc);
		}
		let failItem = currentTable.find(i => i.id === null);
		failItem.prob -= totalIncrease;
		if(failItem.prob < 0) failItem.prob = 0;
		// 3. Calculate total weight for normalization
		const totalWeight = currentTable.reduce((sum, item) => sum + item.prob, 0);
		const oddsContainer = document.getElementById('odds-display');
		if(!oddsContainer) return; // Safety check
		oddsContainer.innerHTML = '';
		// 4. Generate the display items
		currentTable.forEach(item => {
			const percentage = ((item.prob / totalWeight) * 100).toFixed(1);
			// Safety check for ID
			const isMagnetBuff = activeItems.magnet && (item.id === '7Ô∏è‚É£' || item.id === '‚≠ê');
			// Display Logic for FAIL vs Symbols
			let percentColor = "#ffffff";
			if(isMagnetBuff) {
				percentColor = "#4ecca3";
			}
			// 3. If it's a Bomb and we are past Round 1 -> Turn RED
			else if(item.id === 'üí£' && round > 1) {
				percentColor = "#ff4b2b";
			}
			const displayName = item.id === null ? "‚úñ" : item.id;
			const displayColor = item.id === null ? "#666666" : (symbolColors[item.id] || "#ffffff");
			const oddsItem = document.createElement('div');
			oddsItem.className = 'odds-item';
			oddsItem.style.borderLeft = `4px solid ${displayColor}`;
			if(item.id === null) oddsItem.style.opacity = "0.6";
			oddsItem.innerHTML = `
            <div class="odds-symbol">${displayName}</div>
            <div class="odds-percentage" style="color: ${percentColor}; text-shadow: ${percentColor !== '#ffffff' ? '0 0 10px ' + percentColor : 'none'}">
                ${percentage}%
            </div>
            `;
			oddsContainer.appendChild(oddsItem);
		});
		// 5. Update Buff Icons
		const buffsContainer = document.getElementById('buffs');
		buffsContainer.innerHTML = '';
		if(activeItems.luck) buffsContainer.innerHTML += '<div class="buff"><i class="fas fa-clover"></i> Luck</div>';
		if(activeItems.double) buffsContainer.innerHTML += '<div class="buff"><i class="fas fa-bolt"></i> x2</div>';
		if(activeItems.magnet) buffsContainer.innerHTML += '<div class="buff"><i class="fas fa-gem"></i> Magnet</div>';
		// 6. Button state
		const spinBtn = document.getElementById('spin-btn');
		if(!isLuckAnimating) {
			spinBtn.disabled = spinsLeft <= 0;
		}
		spinBtn.innerHTML = spinsLeft <= 0 ? '<i class="fas fa-hourglass-end"></i> NO SPINS' : `<i class="fas fa-play"></i> SPIN (${spinsLeft})`;
	}

	function determineOutcome() {
		let table = JSON.parse(JSON.stringify(baseTable));
		let totalIncrease = 0;
		let bombInc = (round - 1) * 2;
		table.find(i => i.id === 'üí£').prob += bombInc;
		totalIncrease += bombInc;
		if(activeItems.magnet) {
			let s7 = table.find(i => i.id === '7Ô∏è‚É£');
			let ss = table.find(i => i.id === '‚≠ê');
			let s7Inc = s7.prob * 4;
			let ssInc = ss.prob * 4;
			s7.prob += s7Inc;
			ss.prob += ssInc;
			totalIncrease += (s7Inc + ssInc);
		}
		let failItem = table.find(i => i.id === null);
		failItem.prob -= totalIncrease;
		if(failItem.prob < 0) failItem.prob = 0;
		const totalWeight = table.reduce((sum, item) => sum + item.prob, 0);
		const rand = Math.random() * totalWeight;
		let cumulative = 0;
		for(let win of table) {
			cumulative += win.prob;
			if(rand < cumulative) return win;
		}
		return table[table.length - 1];
	}
	// Generate a loss combination
	function generateLoss() {
		let res;
		do {
			res = [
				symbols[Math.floor(Math.random() * 5)],
				symbols[Math.floor(Math.random() * 5)],
				symbols[Math.floor(Math.random() * 5)]
			];
		} while (res[0] === res[1] && res[1] === res[2]);
		return res;
	}
	// Spin the reels
	function play() {
		if(spinsLeft <= 0) return;
		const spinBtn = document.getElementById('spin-btn');
		const machineBox = document.getElementById('machine-box');
		spinsLeft--;
		updateUI();
		spinBtn.disabled = true;
		machineBox.classList.remove('win-flash');
		// Determine outcome
		const outcome = determineOutcome();
		let reelResults = outcome.id ? [outcome.id, outcome.id, outcome.id] : generateLoss();
		// Animate reels
		document.querySelectorAll(".strip").forEach((strip, i) => {
			strip.style.transition = 'none';
			strip.style.transform = `translateY(0px)`;
			strip.offsetHeight; // Force reflow
			// Set the last symbol to our result
			const stripSymbols = strip.querySelectorAll('.symbol');
			stripSymbols[stripSymbols.length - 1].innerText = reelResults[i];
			stripSymbols[stripSymbols.length - 1].style.color = symbolColors[reelResults[i]] || "#ffffff";
			// Slide down to that last symbol
			const travel = (stripSymbols.length - 1) * 120;
			strip.style.transition = `transform ${1.5 + i * 0.4}s cubic-bezier(0.45, 0.05, 0.55, 0.95)`;
			strip.style.transform = `translateY(-${travel}px)`;
		});
		// After animation finishes
		setTimeout(() => {
			let luckTriggered = false;
			if(outcome.id === 'üí£') {
				// BANKRUPT LOGIC
				score = 0;
				showNotification('BANKRUPT! ALL POINTS GONE!', 'bomb');
			} else if(outcome.id) {
				let win = outcome.val;
				if(activeItems.double) win *= 2;
				score += win;
				machineBox.classList.add('win-flash');
				// Show win notification
				showNotification(` CRITICAL WIN! +<span class="notif-highlight">${win}</span> PTS`, 'success');
			} else {
				showNotification('No win this time.', 'loss');
			}
			const luckChance = isCheatActive ? 0.75 : 0.20;
			if(activeItems.luck && Math.random() < luckChance) {
				luckTriggered = true;
				isLuckAnimating = true; // LOCK ON
				spinBtn.disabled = true; // FORCE DISABLED
				setTimeout(() => {
					spinsLeft++;
					updateUI();
					// Luck Visuals
					spinBtn.classList.add('luck-pulse');
					const plus = document.createElement('div');
					plus.className = 'plus-one';
					plus.innerText = "+1";
					const rect = spinBtn.getBoundingClientRect();
					plus.style.left = (rect.left + rect.width / 2) + "px";
					plus.style.top = (rect.top + window.scrollY) + "px";
					document.body.appendChild(plus);
					// Cleanup Visuals and FINALLY enable button
					setTimeout(() => {
						spinBtn.classList.remove('luck-pulse');
						plus.remove();
						isLuckAnimating = false; // LOCK OFF
						spinBtn.disabled = (spinsLeft <= 0);
						updateUI(); // Final refresh
						checkShopOpening();
					}, 2400);
				}, 800);
			}
			// 3. Finalize Spin (If NO luck was triggered)
			if(!luckTriggered) {
				spinBtn.disabled = spinsLeft <= 0;
				updateUI();
				checkShopOpening();
			}
		}, 2500);
	}

	function checkShopOpening() {
		if(spinsLeft === 0) {
			setTimeout(openShop, 1500);
		}
	}
	// Show notification
	function showNotification(message, type) {
		// Create notification element
		const notif = document.createElement('div');
		let icon = "info-circle";
		let typeClass = "notif-info";
		if(type === 'success') {
			typeClass = "notif-win";
			icon = "trophy";
		} else if(type === 'bomb') {
			typeClass = "notif-bomb";
			icon = "skull-crossbones";
		} else if(type === 'round') {
			typeClass = "notif-round";
			icon = "star";
		} else if(type === 'buy') {
			typeClass = "notif-buy";
			icon = "shopping-basket";
		} else if(type === 'loss') {
			typeClass = "notif-loss";
			icon = "times-circle";
		} else if(type === 'luck') {
			typeClass = "notif-luck";
			icon = "clover";
		}
		notif.className = `notification ${typeClass}`;
		const iconSize = (type === 'loss' || type === 'info' || type === 'buy') ? "0.8rem" : "1.1rem";
		notif.innerHTML = `<i class="fas fa-${icon}" style="font-size: ${iconSize};"></i> <span>${message}</span>`;
		document.body.appendChild(notif);
		// Animate In
		setTimeout(() => notif.classList.add('show'), 50);
		// If Bomb, shake the machine
		if(type === 'bomb') {
			const machine = document.getElementById('machine-box');
			machine.classList.add('shake-it');
			setTimeout(() => machine.classList.remove('shake-it'), 1000);
		}
		// Remove after 3 seconds
		const duration = (type === 'luck') ? 4000 : (type === 'loss' || type === 'round' ? 2000 : 3000);
		setTimeout(() => {
			notif.classList.remove('show');
			setTimeout(() => notif.remove(), 500);
		}, duration);
	}
	// Open the magic shop
	function openShop() {
		document.getElementById('shop-score-val').innerText = score;
		updateShopButtons();
		document.getElementById('shop').style.display = 'flex';
		updateUI();
	}
	// Buy an item from the shop
	function buyItem(type, cost) {
		if(activeItems[type] === true) return;
		if(score >= cost) {
			score -= cost;
			activeItems[type] = true;
			// Update both score displays
			document.getElementById('shop-score-val').innerText = score;
			document.getElementById('score').innerText = score;
			updateShopButtons();
			updateUI(); // This refreshes the "Live Win Chances" and "Buff Icons" immediately
			const itemCard = document.getElementById(`item-${type}`);
			itemCard.classList.add('owned');
			showNotification(`${type.toUpperCase()} purchased!`, 'buy');
		} else {
			showNotification('Not enough points!', 'info');
		}
	}
	// Update shop buttons
	function updateShopButtons() {
		const items = ['luck', 'double', 'magnet'];
		items.forEach(type => {
			const btn = document.getElementById(`btn-${type}`);
			if(!btn) return;
			if(activeItems[type] === true) {
				btn.disabled = true;
				btn.innerText = "PURCHASED";
				btn.classList.add('owned');
			} else {
				btn.disabled = false;
				const prices = {
					luck: 50,
					double: 100,
					magnet: 150
				};
				btn.innerText = `PURCHASE`;
				btn.classList.remove('owned');
			}
		});
	}
	// Start the next round
	function nextRound() {
		round++;
		spinsLeft = 10;
		document.getElementById('shop').style.display = 'none';
		updateUI();
		initReels();
		showNotification(`Round ${round} started! Good luck!`, 'round');
	}
	// Cheat code activation
	let cheatBuffer = "";
	window.addEventListener('keydown', (e) => {
		cheatBuffer += e.key;
		if(cheatBuffer.length > 3) {
			cheatBuffer = cheatBuffer.substring(cheatBuffer.length - 3);
		}
		if(cheatBuffer === "999") {
			activateCheat();
		}
	});

	function activateCheat() {
		score = 999;
		spinsLeft = 1;
		isCheatActive = true;
		updateUI();
		if(document.getElementById('shop-score-val')) {
			document.getElementById('shop-score-val').innerText = score;
		}
		showNotification('CHEAT ACTIVATED!', 'round');
		// Visual effect
		document.body.style.backgroundColor = "#2d0000";
		setTimeout(() => {
			document.body.style.backgroundColor = "";
		}, 500);
	}
	// Initialize the game
	window.onload = function() {
		createStars();
		initReels();
		updateUI();
		// Add event listener to spin button
		document.getElementById('spin-btn').addEventListener('click', play);
	};
	</script>
</body>

</html>
